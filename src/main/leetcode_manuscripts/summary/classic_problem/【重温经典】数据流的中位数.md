## 【重温经典】数据流的中位数





### 方法1：大小根堆

![image-20210909225042532](/Users/frankcooper/Library/Application Support/typora-user-images/image-20210909225042532.png)

- 维护maxHeap 和minHeap，保持maxHeap.size() =  minHeap.size() 或者maxHeap.size() =  minHeap.size()+1
- maxHeap维护的数据属于整个数据流的下半部分的数据，minHeap维护的数据属于整个数据流上半部分的数据
- 返回中位数的时候，注意总体的数据个数的奇偶性

```java
class MedianFinder {

    //大根堆，从栈顶到栈底 依次从大到小
    PriorityQueue<Integer> maxHeap = new PriorityQueue<>(((o1, o2) -> o2 - o1));
    //小根堆，从栈顶到栈底 依次从小到大
    PriorityQueue<Integer> minHeap = new PriorityQueue<>();
    int cnt = 0;


    /**
     * initialize your data structure here.
     */
    public MedianFinder() {

    }

    public void addNum(int num) {
        cnt++;
        maxHeap.offer(num);
        minHeap.offer(maxHeap.poll());
        if (cnt % 2 == 1) maxHeap.offer(minHeap.poll());
    }

    public double findMedian() {
        if(cnt %2 ==1 ){
            return maxHeap.peek();
        }else {
            return (maxHeap.peek()+minHeap.peek())/2.0;
        }
    }
}
```